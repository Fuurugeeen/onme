# OnMe UI設計 v2

## 概要

### 設計方針
| 項目 | 決定内容 |
|------|----------|
| 主目的 | 目標達成サポート |
| 利用動機 | 暇なとき（SNS代わりに気軽に） |
| 利用時間 | 5-10分（しっかり対話） |
| 構成タイプ | ダッシュボード型 |
| ナビ構成 | 2タブ（ホーム / 設定） |

### 解決する課題
- 現状: 開いたときに「何をすればいいか不明」
- 解決: ダッシュボードで状況が一目で分かり、すぐにアクションできる

---

## 画面遷移フロー

```
【認証フロー】
┌──────────┐     ┌───────────────┐     ┌──────────────┐
│  Login   │ ──▶ │  Onboarding   │ ──▶ │  GoalSetup   │
│(Google認証)│     │ (AI初期対話)   │     │ (目標設定)    │
└──────────┘     └───────────────┘     └──────────────┘
                                              │
                                              ▼
【メインフロー】                    ┌──────────────────┐
                                  │     Home         │
┌────────────────────────────────▶│  (ダッシュボード)  │◀─┐
│                                 └────────┬─────────┘  │
│                                          │            │
│    ┌─────────────────────────────────────┼────────────┤
│    │                                     │            │
│    ▼                                     ▼            │
│ ┌──────────┐                      ┌───────────┐       │
│ │ Settings │                      │   Chat    │───────┘
│ │(設定/履歴)│                      │ (AI対話)  │
│ └──────────┘                      └───────────┘
```

---

## 画面一覧

| # | 画面名 | パス | 役割 |
|---|--------|------|------|
| 1 | Login | `/login` | Google認証 |
| 2 | Onboarding | `/onboarding` | AI初期対話で自己理解 |
| 3 | GoalSetup | `/goal-setup` | 目標設定 |
| 4 | Home | `/` | ダッシュボード（メイン画面） |
| 5 | Chat | `/chat` | AIコーチング対話 |
| 6 | Settings | `/settings` | 設定・履歴・アカウント |

---

## 各画面の詳細レイアウト

### 1. Login
```
┌─────────────────────────────┐
│                             │
│         OnMe ロゴ            │
│                             │
│   "自分を知る、毎日の対話"    │
│                             │
│   ┌───────────────────┐     │
│   │ 🔵 Googleでログイン │     │
│   └───────────────────┘     │
│                             │
└─────────────────────────────┘
```

### 2. Onboarding
```
┌─────────────────────────────┐
│  ← 戻る                      │
├─────────────────────────────┤
│                             │
│   💬 AI との対話エリア        │
│   （自己紹介・価値観の発見）   │
│                             │
├─────────────────────────────┤
│  [入力欄]            [送信]  │
└─────────────────────────────┘
```

### 3. GoalSetup
```
┌─────────────────────────────┐
│       目標を設定しよう        │
├─────────────────────────────┤
│                             │
│  🎯 達成したいこと            │
│  ┌───────────────────────┐  │
│  │ 例: TOEICで800点を取る  │  │
│  └───────────────────────┘  │
│                             │
│  📅 いつまでに？              │
│  ┌───────────────────────┐  │
│  │ 3ヶ月後 ▼              │  │
│  └───────────────────────┘  │
│                             │
│  💪 なぜ達成したい？          │
│  ┌───────────────────────┐  │
│  │ 例: 就活で有利にしたい   │  │
│  └───────────────────────┘  │
│                             │
│   ┌───────────────────┐     │
│   │     始める        │     │
│   └───────────────────┘     │
│                             │
│     後で設定する →           │
└─────────────────────────────┘
```

### 4. Home（ダッシュボード）
```
┌─────────────────────────────┐
│  OnMe            ⚙️ 設定    │
├─────────────────────────────┤
│                             │
│  ┌───────────────────────┐  │
│  │ 🎯 TOEIC 800点         │  │
│  │ ████████░░░░ 65%      │  │
│  │ 残り 42日              │  │
│  └───────────────────────┘  │
│                             │
│  🔥 継続 12日目              │
│                             │
│  ┌───────────────────────┐  │
│  │                       │  │
│  │  💬 今日のコーチング    │  │
│  │                       │  │
│  │  「昨日の振り返りを     │  │
│  │   しましょう」         │  │
│  │                       │  │
│  │      [話す →]         │  │
│  └───────────────────────┘  │
│                             │
│  📝 最近の気づき             │
│  ┌───────────────────────┐  │
│  │ • 朝の時間が集中できる  │  │
│  │ • 週末まとめは続かない  │  │
│  └───────────────────────┘  │
│                             │
├───────────────┬─────────────┤
│   🏠 ホーム    │  ⚙️ 設定    │
└───────────────┴─────────────┘
```

### 5. Chat（フルスクリーン）
```
┌─────────────────────────────┐
│  ← 戻る     今日のコーチング  │
├─────────────────────────────┤
│                             │
│  ┌─────────────────────┐    │
│  │ 昨日の勉強はどうでした  │    │
│  │ か？                 │    │
│  └─────────────────────┘    │
│                             │
│         ┌─────────────────┐ │
│         │ 2時間くらい     │ │
│         │ 単語帳やりました │ │
│         └─────────────────┘ │
│                             │
│  ┌─────────────────────┐    │
│  │ いいですね！どんな    │    │
│  │ 気づきがありましたか？ │    │
│  └─────────────────────┘    │
│                             │
│                             │
├─────────────────────────────┤
│  [入力欄]            [送信]  │
└─────────────────────────────┘
```

### 6. Settings
```
┌─────────────────────────────┐
│  ← 戻る          設定        │
├─────────────────────────────┤
│                             │
│  👤 アカウント               │
│  ┌───────────────────────┐  │
│  │ user@example.com      │  │
│  └───────────────────────┘  │
│                             │
│  🎯 目標を編集               │
│  ┌───────────────────────┐  │
│  │ TOEIC 800点 →         │  │
│  └───────────────────────┘  │
│                             │
│  📜 過去の会話               │
│  ┌───────────────────────┐  │
│  │ 12/30 振り返り →      │  │
│  │ 12/29 目標確認 →      │  │
│  │ 12/28 週間レビュー →  │  │
│  └───────────────────────┘  │
│                             │
│  💡 気づき一覧               │
│  ┌───────────────────────┐  │
│  │ 12件の気づき →        │  │
│  └───────────────────────┘  │
│                             │
│  🚪 ログアウト               │
│                             │
├───────────────┬─────────────┤
│   🏠 ホーム    │  ⚙️ 設定    │
└───────────────┴─────────────┘
```

---

## コンポーネント構成

### ディレクトリ構成

```
frontend/src/
├── components/
│   ├── ui/                    # 基本UI
│   │   ├── Button.tsx
│   │   ├── Card.tsx
│   │   ├── Input.tsx
│   │   └── ProgressBar.tsx    ← 新規
│   │
│   ├── chat/                  # チャット
│   │   ├── ChatMessage.tsx
│   │   └── ChatInput.tsx
│   │
│   ├── home/                  ← 新規
│   │   ├── GoalCard.tsx       # 目標表示カード
│   │   ├── StreakBadge.tsx    # 継続日数バッジ
│   │   ├── CoachingCTA.tsx    # 「話す」ボタンエリア
│   │   └── InsightsList.tsx   # 気づき一覧
│   │
│   ├── goal/                  ← 新規
│   │   └── GoalForm.tsx       # 目標入力フォーム
│   │
│   └── layouts/
│       ├── AppLayout.tsx      # 2タブナビに変更
│       ├── AuthLayout.tsx
│       └── ChatLayout.tsx     ← 新規
│
├── pages/
│   ├── LoginPage.tsx
│   ├── OnboardingPage.tsx
│   ├── GoalSetupPage.tsx      ← 新規
│   ├── HomePage.tsx           ← 新規
│   ├── ChatPage.tsx           ← 新規
│   └── SettingsPage.tsx       ← 新規
```

### 変更サマリー

| 区分 | ファイル | 対応 |
|------|----------|------|
| 新規 | GoalSetupPage.tsx | 目標設定画面 |
| 新規 | HomePage.tsx | ダッシュボード |
| 新規 | ChatPage.tsx | チャット専用 |
| 新規 | SettingsPage.tsx | 設定・履歴 |
| 新規 | GoalCard.tsx | 目標表示 |
| 新規 | StreakBadge.tsx | 継続日数 |
| 新規 | CoachingCTA.tsx | 話すボタン |
| 新規 | InsightsList.tsx | 気づき一覧 |
| 新規 | ProgressBar.tsx | プログレスバー |
| 変更 | AppLayout.tsx | 2タブに変更 |
| 削除 | DailyCoachPage.tsx | HomePage + ChatPage に分割 |
| 削除 | ProgressPage.tsx | HomePage に統合 |
| 削除 | ProfilePage.tsx | SettingsPage に統合 |

---

## ルーティング

```typescript
// App.tsx
<Routes>
  {/* 認証フロー */}
  <Route path="/login" element={<LoginPage />} />

  {/* プライベート */}
  <Route element={<PrivateRoute />}>
    <Route path="/onboarding" element={<OnboardingPage />} />
    <Route path="/goal-setup" element={<GoalSetupPage />} />

    {/* メインレイアウト（2タブ） */}
    <Route element={<AppLayout />}>
      <Route path="/" element={<HomePage />} />
      <Route path="/settings" element={<SettingsPage />} />
    </Route>

    {/* チャット（フルスクリーン） */}
    <Route path="/chat" element={<ChatPage />} />
  </Route>
</Routes>
```

---

## 旧設計との対応表

| 旧画面 | 新画面 | 変更内容 |
|--------|--------|----------|
| LoginPage | LoginPage | 維持 |
| OnboardingPage | OnboardingPage | 維持 |
| - | GoalSetupPage | 新規追加 |
| DailyCoachPage | HomePage + ChatPage | 分割 |
| ProgressPage | HomePage | 統合 |
| ProfilePage | SettingsPage | 拡張・統合 |

---

## 次のステップ

1. [ ] 新規コンポーネントの実装
2. [ ] AppLayout を2タブに変更
3. [ ] ルーティング更新
4. [ ] 旧ページの削除
5. [ ] API/ストアの調整（必要に応じて）
